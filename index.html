<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AMP React</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

    <style>
      /**
      * We intentionally break with HTML5's default [hidden] styling to apply
      * !important.
      */
      [hidden] {
        /* This must be !important, else the toggle helper system would break down
          due to specificity */
        display: none !important;
      }

      .i-amphtml-element {
        display: inline-block;
      }

      /* layout=nodisplay are automatically hidden until JS initializes. */
      [layout=nodisplay]:not(.i-amphtml-element) {
        display: none !important;
      }

      /* Initialized layout=nodisplay contain [hidden] */
      .i-amphtml-layout-nodisplay[hidden],
      [layout=nodisplay][hidden]:not(.i-amphtml-layout-nodisplay)
      {
        /* Display is set/reset via the hidden attribute */
      }
      .i-amphtml-layout-nodisplay:not([hidden]),
      [layout=nodisplay]:not(.i-amphtml-layout-nodisplay[hidden])
      {
        /* Display is set/reset via the hidden attribute */
      }

      .i-amphtml-layout-fixed,
      [layout=fixed][width][height]:not(.i-amphtml-layout-fixed)
      {
        display: inline-block;
        position: relative;
      }

      .i-amphtml-layout-responsive,
      [layout=responsive][width][height]:not(.i-amphtml-layout-responsive),
      [width][height][sizes]:not(.i-amphtml-layout-responsive)
      {
        display: block;
        position: relative;
      }

      .i-amphtml-layout-fixed-height,
      [layout=fixed-height][height]
      {
        display: block;
        position: relative;
      }

      .i-amphtml-layout-container,
      [layout=container]
      {
        display: block;
        position: relative;
      }

      .i-amphtml-layout-fill,
      [layout=fill]:not(.i-amphtml-layout-fill)
      {
        display: block;
        overflow: hidden !important;
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
      }

      .i-amphtml-layout-flex-item,
      [layout=flex-item]:not(.i-amphtml-layout-flex-item)
      {
        display: block;
        position: relative;
        flex: 1 1 auto;
      }

      .i-amphtml-layout-fluid {
        position: relative;
      }

      .i-amphtml-layout-size-defined {
        overflow: hidden !important;
      }

      .i-amphtml-layout-awaiting-size {
        position: absolute !important;
        top: auto !important;
        bottom: auto !important;
      }

      i-amphtml-sizer {
        display: block !important;
      }

      .i-amphtml-fill-content,
      .i-amphtml-blurry-placeholder {
        display: block;
        /* These lines are a work around to this issue in iOS:     */
        /* https://bugs.webkit.org/show_bug.cgi?id=155198          */
        /* And: https://github.com/ampproject/amphtml/issues/11133 */
        height: 0;
        max-height: 100%;
        max-width: 100%;
        min-height: 100%;
        min-width: 100%;
        width: 0;
        margin: auto;
      }

      .i-amphtml-layout-size-defined .i-amphtml-fill-content {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
      }

      .i-amphtml-layout-intrinsic .i-amphtml-sizer {
        max-width: 100%;
      }

      .i-amphtml-replaced-content {
        padding: 0 !important;
        border: none !important;
        /* TODO(dvoytenko): explore adding here object-fit. */
      }

      /* For author styling. */
      .amp-unresolved {
      }

      .i-amphtml-unresolved {
        position: relative;
        overflow: hidden !important;
      }

      .i-amphtml-select-disabled {
        user-select: none !important;
      }

      /* "notbuild" classes are set as soon as an element is created and removed
        as soon as the element is built. */

      .amp-notbuilt {
        /* For author styling. */
      }

      .i-amphtml-notbuilt,
      [layout]:not(.i-amphtml-element)
      {
        position: relative;
        overflow: hidden !important;
        color: transparent !important;
      }

      .i-amphtml-notbuilt:not(.i-amphtml-layout-container) > * ,
      [layout]:not([layout=container]):not(.i-amphtml-element) > *
      {
        display: none;
      }
    </style>

    <script src="https://unpkg.com/react/umd/react.development.js"></script>
    <script src="http://unpkg.com/react-dom/umd/react-dom.development.js"></script>
    <script type="module" src="./src/amp-react-img.js"></script>
    <script type="module" src="./src/amp-react-carousel.js"></script>
    <script type="module" src="./src/amp-react-carousel-hooks.js"></script>
    <script type="module" src="./src/amp-react-size.js"></script>
    <script>
      function addSlide() {
        [c1, c2].forEach(function(carousel) {
          var slide = document.createElement('div');
          slide.textContent = 'added slide';
          carousel.insertBefore(slide, carousel.firstElementChild);
        });
      }
      function removeSlide() {
        [c1, c2].forEach(function(carousel) {
          var slide = carousel.querySelector('div');
          if (slide) {
            carousel.removeChild(slide);
          }
        });
      }
    </script>
  </head>
  <body>

    <h1>amp-react-img</h1>
    <amp-react-img
      id="first"
      alt="preact img"
      srcset="https://raw.githubusercontent.com/preactjs/preact/8b0bcc927995c188eca83cba30fbc83491cc0b2f/logo.svg?sanitize=true 100w"
      layout="fixed"
      width=300
      height=90>
    </amp-react-img>

    <!-- TBD: display:block is pretty important here. Whose job is to set it and when? -->
    <amp-react-carousel
      id="c1"
      layout="responsive"
      width=300
      height=150
      style="display: block;"
      current-slide="1">
      <div>slide0</div>
      <div>slide1</div>
      <div>slide2</div>
      <div>slide3</div>
      <div>slide4</div>
      <div>slide5</div>
      <!-- TBD: is this convenient to position buttons here? -->
      <button arrow-next style="position: absolute; right: 8px; top: calc(50% - 16px)">&rarr;</button>
    </amp-react-carousel>
  
    <!-- TBD: display:block is pretty important here. Whose job is to set it and when? -->
    <amp-react-carousel-hooks
      id="c2"
      layout="responsive"
      width=300
      height=150
      style="display: block;"
      current-slide="1">
      <div>slide0</div>
      <div>slide1</div>
      <div>slide2</div>
      <div>slide3</div>
      <div>slide4</div>
      <div>slide5</div>
      <!-- TBD: is this convenient to position buttons here? -->
      <button arrow-next style="position: absolute; right: 8px; top: calc(50% - 16px)">&rarr;</button>
    </amp-react-carousel-hooks>

    <div style="margin: 8px 0;">
      <button onclick="addSlide()">Add slide</button>
      <button onclick="removeSlide()">Remove slide</button>
    </div>

    <amp-react-size
      id="s1"
      layout="responsive"
      width=300
      height=150
      style="display: block;">
    </amp-react-size>

    <div style="height: 500vh">scroll down...</div>

    <amp-react-img
      id="second"
      alt="bindable"
      src="https://raw.githubusercontent.com/preactjs/preact/8b0bcc927995c188eca83cba30fbc83491cc0b2f/logo.svg?sanitize=true"
      layout="responsive"
      width=300
      height=90>
    </amp-react-img>

  </body>
</html>
